{"ast":null,"code":"var _jsxFileName = \"/home/matheus/Documents/drive-sync/Projects/endor/packages/web/src/pages/live.tsx\";\nvar __jsx = React.createElement;\n\nfunction _EMOTION_STRINGIFIED_CSS_ERROR__() { return \"You have tried to stringify object returned from `css` function. It isn't supposed to be used directly (e.g. as value of the `className` prop), but rather handed to emotion so it can handle it (e.g. as value of `css` prop).\"; }\n\nimport { useRouter } from 'next/router';\nimport React, { useCallback, useEffect, useState } from 'react';\nimport { FiSend } from 'react-icons/fi';\nimport { Flex, Box, Text, Textarea, Button, Tooltip, useDisclosure } from '@chakra-ui/core';\nimport { format } from 'date-fns';\nimport { ptBR } from 'date-fns/locale';\nimport isUuid from 'is-uuid';\nimport io from 'socket.io-client';\nimport MessageBox from '@/components/MessageBox';\nimport SetUsernameForLiveTelespectors from '@/components/Modals/SetUsernameForLiveTelespectors';\nimport SEO from '@/components/SEO';\nimport Title from '@/components/Title';\nimport api from '@/services/api';\nimport { jsx as ___EmotionJSX } from \"@emotion/core\";\n\nvar _ref = false ? {\n  name: \"9z75ta-Live\",\n  styles: \"color:gray.200;;label:Live;\"\n} : {\n  name: \"9z75ta-Live\",\n  styles: \"color:gray.200;;label:Live;\",\n  map: \"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL21hdGhldXMvRG9jdW1lbnRzL2RyaXZlLXN5bmMvUHJvamVjdHMvZW5kb3IvcGFja2FnZXMvd2ViL3NyYy9wYWdlcy9saXZlLnRzeCJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFtS3FCIiwiZmlsZSI6Ii9ob21lL21hdGhldXMvRG9jdW1lbnRzL2RyaXZlLXN5bmMvUHJvamVjdHMvZW5kb3IvcGFja2FnZXMvd2ViL3NyYy9wYWdlcy9saXZlLnRzeCIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IHVzZVJvdXRlciB9IGZyb20gJ25leHQvcm91dGVyJztcbmltcG9ydCBSZWFjdCwgeyB1c2VDYWxsYmFjaywgdXNlRWZmZWN0LCB1c2VTdGF0ZSB9IGZyb20gJ3JlYWN0JztcbmltcG9ydCB7IEZpU2VuZCB9IGZyb20gJ3JlYWN0LWljb25zL2ZpJztcblxuaW1wb3J0IHtcbiAgRmxleCxcbiAgQm94LFxuICBUZXh0LFxuICBUZXh0YXJlYSxcbiAgQnV0dG9uLFxuICBUb29sdGlwLFxuICB1c2VEaXNjbG9zdXJlLFxufSBmcm9tICdAY2hha3JhLXVpL2NvcmUnO1xuaW1wb3J0IHsgZm9ybWF0IH0gZnJvbSAnZGF0ZS1mbnMnO1xuaW1wb3J0IHsgcHRCUiB9IGZyb20gJ2RhdGUtZm5zL2xvY2FsZSc7XG5pbXBvcnQgaXNVdWlkIGZyb20gJ2lzLXV1aWQnO1xuaW1wb3J0IGlvIGZyb20gJ3NvY2tldC5pby1jbGllbnQnO1xuXG5pbXBvcnQgTWVzc2FnZUJveCBmcm9tICdAL2NvbXBvbmVudHMvTWVzc2FnZUJveCc7XG5pbXBvcnQgU2V0VXNlcm5hbWVGb3JMaXZlVGVsZXNwZWN0b3JzIGZyb20gJ0AvY29tcG9uZW50cy9Nb2RhbHMvU2V0VXNlcm5hbWVGb3JMaXZlVGVsZXNwZWN0b3JzJztcbmltcG9ydCBTRU8gZnJvbSAnQC9jb21wb25lbnRzL1NFTyc7XG5pbXBvcnQgVGl0bGUgZnJvbSAnQC9jb21wb25lbnRzL1RpdGxlJztcbmltcG9ydCBhcGkgZnJvbSAnQC9zZXJ2aWNlcy9hcGknO1xuXG5pbnRlcmZhY2UgSU1lc3NhZ2Uge1xuICBpZDogc3RyaW5nO1xuICBzZW5kZXI6IHN0cmluZztcbiAgY29udGVudDogc3RyaW5nO1xufVxuXG4vLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmVcbmludGVyZmFjZSBEZWNlYXNlZCB7XG4gIGlkPzogc3RyaW5nO1xuICBuYW1lPzogc3RyaW5nO1xuICBsaXZlX2NoYXRfbGluaz86IHN0cmluZztcbiAgZnVuZXJhbF9pbml0aWFsX2RhdGU/OiBzdHJpbmc7XG4gIGZ1bmVyYWxfZmluYWxfZGF0ZT86IHN0cmluZztcbiAgc2VwdWx0aW5nX2RhdGU/OiBzdHJpbmc7XG4gIGZ1bmVyYWw/OiB7XG4gICAgbmFtZT86IHN0cmluZztcbiAgICBjZW1ldGVyeT86IHtcbiAgICAgIG5hbWU/OiBzdHJpbmc7XG4gICAgfTtcbiAgfTtcbn1cblxuY29uc3QgTGl2ZTogUmVhY3QuRkMgPSAoKSA9PiB7XG4gIGNvbnN0IHJvdXRlciA9IHVzZVJvdXRlcigpO1xuXG4gIGNvbnN0IFtkZWNlYXNlZCwgc2V0RGVjZWFzZWRdID0gdXNlU3RhdGU8RGVjZWFzZWQ+KHt9IGFzIERlY2Vhc2VkKTtcbiAgY29uc3QgW3VzZXJuYW1lLCBzZXRVc2VybmFtZV0gPSB1c2VTdGF0ZTxzdHJpbmc+KCcnKTtcbiAgY29uc3QgW21lc3NhZ2UsIHNldE1lc3NhZ2VdID0gdXNlU3RhdGU8c3RyaW5nPignJyk7XG4gIGNvbnN0IFttZXNzYWdlcywgc2V0TWVzc2FnZXNdID0gdXNlU3RhdGU8SU1lc3NhZ2VbXT4oW10gYXMgSU1lc3NhZ2VbXSk7XG5cbiAgY29uc3Qge1xuICAgIGlzT3BlbjogaXNHZXRVc2VybmFtZU1vZGFsT3BlbixcbiAgICBvbk9wZW46IG9uT3BlbkdldFVzZXJuYW1lTW9kYWwsXG4gICAgb25DbG9zZTogb25DbG9zZUdldFVzZXJuYW1lTW9kYWwsXG4gIH0gPSB1c2VEaXNjbG9zdXJlKCk7XG5cbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBjb25zdCBxdWVyeUlkID0gcm91dGVyLnF1ZXJ5LmlkIGFzIHN0cmluZztcblxuICAgIGlmIChxdWVyeUlkID09PSB1bmRlZmluZWQpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBpZiAoIXF1ZXJ5SWQubGVuZ3RoIHx8ICFpc1V1aWQudjQocXVlcnlJZCkpIHtcbiAgICAgIHJvdXRlci5yZXBsYWNlKCcvbG9naW4nKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBvbk9wZW5HZXRVc2VybmFtZU1vZGFsKCk7XG5cbiAgICBhcGkuZ2V0KGBkZWNlYXNlZHMvJHtxdWVyeUlkfWApLnRoZW4ocmVzcG9uc2UgPT4ge1xuICAgICAgc2V0RGVjZWFzZWQocmVzcG9uc2UuZGF0YSk7XG4gICAgfSk7XG5cbiAgICBhcGkuZ2V0KGAvbWVzc2FnZXMvJHtxdWVyeUlkfWApLnRoZW4ocmVzcG9uc2UgPT4ge1xuICAgICAgc2V0TWVzc2FnZShyZXNwb25zZS5kYXRhKTtcbiAgICAgIGNvbnNvbGUubG9nKHJlc3BvbnNlLmRhdGEpO1xuICAgIH0pO1xuICB9LCBbcm91dGVyLnF1ZXJ5LmlkXSk7XG5cbiAgY29uc3Qgb25TYXZlVXNlcm5hbWUgPSB1c2VDYWxsYmFjayhcbiAgICAobmFtZTogc3RyaW5nKSA9PiB7XG4gICAgICBzZXRVc2VybmFtZShuYW1lKTtcblxuICAgICAgb25DbG9zZUdldFVzZXJuYW1lTW9kYWwoKTtcblxuICAgICAgY29uc3Qgc29ja2V0ID0gaW8ocHJvY2Vzcy5lbnYuTkVYVF9QVUJMSUNfQVBJX1VSTCwge1xuICAgICAgICBxdWVyeTogeyB1c2VybmFtZTogbmFtZSB9LFxuICAgICAgfSk7XG5cbiAgICAgIHNvY2tldC5lbWl0KCdqb2luJywgZGVjZWFzZWQuaWQpO1xuXG4gICAgICBzb2NrZXQub24oJ25ldycsIChtc2c6IElNZXNzYWdlKSA9PiB7XG4gICAgICAgIHNldE1lc3NhZ2VzKHN0YXRlID0+IFsuLi5zdGF0ZSwgbXNnXSk7XG4gICAgICB9KTtcbiAgICB9LFxuICAgIFtkZWNlYXNlZF0sXG4gICk7XG5cbiAgY29uc3QgaGFuZGxlU3VibWl0TWVzc2FnZSA9IHVzZUNhbGxiYWNrKGFzeW5jICgpID0+IHtcbiAgICBzZXRNZXNzYWdlKCcnKTtcblxuICAgIGNvbnN0IG1lc3NhZ2VEYXRhID0ge1xuICAgICAgc2VuZGVyOiB1c2VybmFtZSxcbiAgICAgIGNvbnRlbnQ6IG1lc3NhZ2UsXG4gICAgICBjaGFubmVsOiBkZWNlYXNlZC5pZCxcbiAgICB9O1xuXG4gICAgYXdhaXQgYXBpLnBvc3QoJy9tZXNzYWdlcycsIG1lc3NhZ2VEYXRhKS50aGVuKHJlc3BvbnNlID0+IHtcbiAgICAgIHNldE1lc3NhZ2UocmVzcG9uc2UuZGF0YSk7XG4gICAgfSk7XG4gIH0sIFttZXNzYWdlLCB1c2VybmFtZSwgZGVjZWFzZWRdKTtcblxuICByZXR1cm4gKFxuICAgIDw+XG4gICAgICA8U0VPXG4gICAgICAgIHRpdGxlPVwiRW5kb3JcIlxuICAgICAgICBpbWFnZT1cIm9nL2Jvb3N0LnBuZ1wiXG4gICAgICAgIHNob3VsZEV4Y2x1ZGVUaXRsZVN1ZmZpeFxuICAgICAgICBkZXNjcmlwdGlvbj1cIkZhemVyIGxvZ2luIG5hIHBsYXRhZm9ybWFcIlxuICAgICAgLz5cblxuICAgICAgPFNldFVzZXJuYW1lRm9yTGl2ZVRlbGVzcGVjdG9yc1xuICAgICAgICBvblNhdmU9e29uU2F2ZVVzZXJuYW1lfVxuICAgICAgICBpc09wZW49e2lzR2V0VXNlcm5hbWVNb2RhbE9wZW59XG4gICAgICAgIG9uQ2xvc2U9e29uQ2xvc2VHZXRVc2VybmFtZU1vZGFsfVxuICAgICAgLz5cblxuICAgICAgPEJveFxuICAgICAgICBkaXNwbGF5PVwiZ3JpZFwiXG4gICAgICAgIGdyaWRUZW1wbGF0ZUNvbHVtbnM9XCI3NSUgMjUlXCJcbiAgICAgICAgYXM9XCJtYWluXCJcbiAgICAgICAgaGVpZ2h0PVwiMTAwdmhcIlxuICAgICAgICB3aWR0aD1cIjEwMCVcIlxuICAgICAgICBwYWRkaW5nWD17Nn1cbiAgICAgICAgYmFja2dyb3VuZENvbG9yPVwiZ3JheS45MDBcIlxuICAgICAgICBwYWRkaW5nVG9wPXs4fVxuICAgICAgICBwYWRkaW5nQm90dG9tPXs4fVxuICAgICAgICBwYWRkaW5nUmlnaHQ9ezh9XG4gICAgICA+XG4gICAgICAgIDxGbGV4IGRpcmVjdGlvbj1cImNvbHVtblwiIG1hcmdpblJpZ2h0PXs4fT5cbiAgICAgICAgICA8aWZyYW1lXG4gICAgICAgICAgICBzcmM9e2RlY2Vhc2VkLmxpdmVfY2hhdF9saW5rfVxuICAgICAgICAgICAgZnJhbWVCb3JkZXI9XCIwXCJcbiAgICAgICAgICAgIHRpdGxlPXtkZWNlYXNlZC5pZH1cbiAgICAgICAgICAgIHN0eWxlPXt7IHdpZHRoOiAnMTAwJScsIGhlaWdodDogJzc1JScgfX1cbiAgICAgICAgICA+PC9pZnJhbWU+XG4gICAgICAgICAgPEZsZXhcbiAgICAgICAgICAgIGJhY2tncm91bmRDb2xvcj1cImdyYXkuODAwXCJcbiAgICAgICAgICAgIG1hcmdpblRvcD17OH1cbiAgICAgICAgICAgIHBhZGRpbmdUb3A9ezZ9XG4gICAgICAgICAgICBwYWRkaW5nUmlnaHQ9ezZ9XG4gICAgICAgICAgICBwYWRkaW5nTGVmdD17Nn1cbiAgICAgICAgICAgIHBhZGRpbmdCb3R0b209ezZ9XG4gICAgICAgICAgICBib3JkZXJSYWRpdXM9XCJtZFwiXG4gICAgICAgICAgICB3aWR0aD1cIjEwMCVcIlxuICAgICAgICAgICAgaGVpZ2h0PVwiMjUlXCJcbiAgICAgICAgICA+XG4gICAgICAgICAgICA8Qm94IHdpZHRoPVwiMTAwJVwiIGNvbG9yPVwiZ3JheS4yMDBcIj5cbiAgICAgICAgICAgICAgPFRpdGxlIGNzcz17eyBjb2xvcjogJ2dyYXkuMjAwJyB9fT57ZGVjZWFzZWQubmFtZX08L1RpdGxlPlxuICAgICAgICAgICAgICA8VGV4dCBmb250U2l6ZT1cInhsXCI+e2RlY2Vhc2VkPy5mdW5lcmFsPy5uYW1lfTwvVGV4dD5cbiAgICAgICAgICAgICAge2RlY2Vhc2VkLmZ1bmVyYWxfZmluYWxfZGF0ZSAmJlxuICAgICAgICAgICAgICAgIGRlY2Vhc2VkLmZ1bmVyYWxfaW5pdGlhbF9kYXRlICYmXG4gICAgICAgICAgICAgICAgZGVjZWFzZWQuc2VwdWx0aW5nX2RhdGUgJiYgKFxuICAgICAgICAgICAgICAgICAgPD5cbiAgICAgICAgICAgICAgICAgICAgPEZsZXg+XG4gICAgICAgICAgICAgICAgICAgICAgPFRleHQgZm9udFNpemU9XCJ4bFwiPlxuICAgICAgICAgICAgICAgICAgICAgICAge2Zvcm1hdChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgbmV3IERhdGUoZGVjZWFzZWQuZnVuZXJhbF9pbml0aWFsX2RhdGUpLFxuICAgICAgICAgICAgICAgICAgICAgICAgICBcIidWZWzDs3JpbzogJ2RkJy8nTU0nLyd5eXl5ICdkYXMnIEhIOm1tXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgIHsgbG9jYWxlOiBwdEJSIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAgICAgICAgeycgw6BzICd9XG4gICAgICAgICAgICAgICAgICAgICAgICB7Zm9ybWF0KFxuICAgICAgICAgICAgICAgICAgICAgICAgICBuZXcgRGF0ZShkZWNlYXNlZC5mdW5lcmFsX2ZpbmFsX2RhdGUpLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAnSEg6bW0nLFxuICAgICAgICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbG9jYWxlOiBwdEJSLFxuICAgICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgICAgICA8L1RleHQ+XG4gICAgICAgICAgICAgICAgICAgIDwvRmxleD5cbiAgICAgICAgICAgICAgICAgICAgPEZsZXg+XG4gICAgICAgICAgICAgICAgICAgICAgPFRleHQgZm9udFNpemU9XCJ4bFwiPlxuICAgICAgICAgICAgICAgICAgICAgICAge2Zvcm1hdChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgbmV3IERhdGUoZGVjZWFzZWQuc2VwdWx0aW5nX2RhdGUpLFxuICAgICAgICAgICAgICAgICAgICAgICAgICBcIidTZXB1bHRhbWVudG86ICdkZCcvJ01NJy8neXl5eSAnw6BzJyBISDptbVwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICB7IGxvY2FsZTogcHRCUiB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgICAgICA8L1RleHQ+XG4gICAgICAgICAgICAgICAgICAgIDwvRmxleD5cbiAgICAgICAgICAgICAgICAgIDwvPlxuICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICA8L0JveD5cbiAgICAgICAgICA8L0ZsZXg+XG4gICAgICAgIDwvRmxleD5cbiAgICAgICAgPEZsZXhcbiAgICAgICAgICBkaXJlY3Rpb249XCJjb2x1bW5cIlxuICAgICAgICAgIGJhY2tncm91bmRDb2xvcj1cImdyYXkuODAwXCJcbiAgICAgICAgICBib3JkZXJSYWRpdXM9XCJtZFwiXG4gICAgICAgICAgd2lkdGg9XCIxMDAlXCJcbiAgICAgICAgICBoZWlnaHQ9XCIxMDAlXCJcbiAgICAgICAgICBwYWRkaW5nPXs2fVxuICAgICAgICA+XG4gICAgICAgICAgPEJveCB3aWR0aD1cIjEwMCVcIiBjb2xvcj1cImdyYXkuMjAwXCI+XG4gICAgICAgICAgICA8VGl0bGUgY3NzPXt7IGNvbG9yOiAnZ3JheS4yMDAnIH19PkNoYXQ8L1RpdGxlPlxuICAgICAgICAgIDwvQm94PlxuICAgICAgICAgIDxGbGV4XG4gICAgICAgICAgICBkaXJlY3Rpb249XCJjb2x1bW5cIlxuICAgICAgICAgICAgd2lkdGg9XCIxMDAlXCJcbiAgICAgICAgICAgIGhlaWdodD1cIjg4JVwiXG4gICAgICAgICAgICBvdmVyZmxvd1k9XCJhdXRvXCJcbiAgICAgICAgICAgIGJvcmRlckJvdHRvbT1cIjJweCBzb2xpZCAjZmZmXCJcbiAgICAgICAgICA+XG4gICAgICAgICAgICB7bWVzc2FnZXMubWFwKGFjdHVhbE1lc3NhZ2UgPT4gKFxuICAgICAgICAgICAgICA8TWVzc2FnZUJveFxuICAgICAgICAgICAgICAgIGtleT17YWN0dWFsTWVzc2FnZS5pZH1cbiAgICAgICAgICAgICAgICB1c2VybmFtZT17YWN0dWFsTWVzc2FnZS5zZW5kZXJ9XG4gICAgICAgICAgICAgICAgbWVzc2FnZT17YWN0dWFsTWVzc2FnZS5jb250ZW50fVxuICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgKSl9XG4gICAgICAgICAgPC9GbGV4PlxuICAgICAgICAgIDxGbGV4IHdpZHRoPVwiMTAwJVwiIGhlaWdodD1cIjEyJVwiIHBhZGRpbmdUb3A9ezJ9PlxuICAgICAgICAgICAgPFRleHRhcmVhXG4gICAgICAgICAgICAgIG9uQ2hhbmdlPXtlID0+IHNldE1lc3NhZ2UoZS50YXJnZXQudmFsdWUpfVxuICAgICAgICAgICAgICB2YWx1ZT17bWVzc2FnZX1cbiAgICAgICAgICAgICAgcGxhY2Vob2xkZXI9XCJEaWdpdGUgc3VhIG1lbnNhZ2VtXCJcbiAgICAgICAgICAgICAgY29sb3I9XCJXaGl0ZVwiXG4gICAgICAgICAgICAgIHdpZHRoPVwiODYlXCJcbiAgICAgICAgICAgICAgYm9yZGVyPXswfVxuICAgICAgICAgICAgICBtaW5IZWlnaHQ9ezJ9XG4gICAgICAgICAgICAgIGhlaWdodD1cIjEwMCVcIlxuICAgICAgICAgICAgICByZXNpemU9XCJub25lXCJcbiAgICAgICAgICAgICAgYm9yZGVyUmFkaXVzPVwiOHB4IDAgMCA4cHhcIlxuICAgICAgICAgICAgICBiYWNrZ3JvdW5kQ29sb3I9XCJncmF5LjcwMFwiXG4gICAgICAgICAgICAvPlxuICAgICAgICAgICAgPFRvb2x0aXAgbGFiZWw9XCJFbnZpYXIgbWVuc2FnZW1cIiBhcmlhLWxhYmVsPVwiRW52aWFyIG1lbnNhZ2VtXCI+XG4gICAgICAgICAgICAgIDxCdXR0b25cbiAgICAgICAgICAgICAgICBvbkNsaWNrPXtoYW5kbGVTdWJtaXRNZXNzYWdlfVxuICAgICAgICAgICAgICAgIHdpZHRoPVwiMTQlXCJcbiAgICAgICAgICAgICAgICBoZWlnaHQ9XCIxMDAlXCJcbiAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kQ29sb3I9XCJncmF5LjcwMFwiXG4gICAgICAgICAgICAgICAgYm9yZGVyUmFkaXVzPVwiMCA4cHggOHB4IDBcIlxuICAgICAgICAgICAgICAgIGFsaWduSXRlbXM9XCJjZW50ZXJcIlxuICAgICAgICAgICAgICAgIGp1c3RpZnlDb250ZW50PVwiY2VudGVyXCJcbiAgICAgICAgICAgICAgICBfaG92ZXI9e3tcbiAgICAgICAgICAgICAgICAgIGJhY2tncm91bmRDb2xvcjogJ2dyYXkuOTAwJyxcbiAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgPEZpU2VuZCBjb2xvcj1cIldoaXRlXCIgc2l6ZT17MjB9IC8+XG4gICAgICAgICAgICAgIDwvQnV0dG9uPlxuICAgICAgICAgICAgPC9Ub29sdGlwPlxuICAgICAgICAgIDwvRmxleD5cbiAgICAgICAgPC9GbGV4PlxuICAgICAgPC9Cb3g+XG4gICAgPC8+XG4gICk7XG59O1xuXG5leHBvcnQgZGVmYXVsdCBMaXZlO1xuIl19 */\",\n  toString: _EMOTION_STRINGIFIED_CSS_ERROR__\n};\n\nvar _ref2 = false ? {\n  name: \"9z75ta-Live\",\n  styles: \"color:gray.200;;label:Live;\"\n} : {\n  name: \"9z75ta-Live\",\n  styles: \"color:gray.200;;label:Live;\",\n  map: \"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL21hdGhldXMvRG9jdW1lbnRzL2RyaXZlLXN5bmMvUHJvamVjdHMvZW5kb3IvcGFja2FnZXMvd2ViL3NyYy9wYWdlcy9saXZlLnRzeCJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFpTm1CIiwiZmlsZSI6Ii9ob21lL21hdGhldXMvRG9jdW1lbnRzL2RyaXZlLXN5bmMvUHJvamVjdHMvZW5kb3IvcGFja2FnZXMvd2ViL3NyYy9wYWdlcy9saXZlLnRzeCIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IHVzZVJvdXRlciB9IGZyb20gJ25leHQvcm91dGVyJztcbmltcG9ydCBSZWFjdCwgeyB1c2VDYWxsYmFjaywgdXNlRWZmZWN0LCB1c2VTdGF0ZSB9IGZyb20gJ3JlYWN0JztcbmltcG9ydCB7IEZpU2VuZCB9IGZyb20gJ3JlYWN0LWljb25zL2ZpJztcblxuaW1wb3J0IHtcbiAgRmxleCxcbiAgQm94LFxuICBUZXh0LFxuICBUZXh0YXJlYSxcbiAgQnV0dG9uLFxuICBUb29sdGlwLFxuICB1c2VEaXNjbG9zdXJlLFxufSBmcm9tICdAY2hha3JhLXVpL2NvcmUnO1xuaW1wb3J0IHsgZm9ybWF0IH0gZnJvbSAnZGF0ZS1mbnMnO1xuaW1wb3J0IHsgcHRCUiB9IGZyb20gJ2RhdGUtZm5zL2xvY2FsZSc7XG5pbXBvcnQgaXNVdWlkIGZyb20gJ2lzLXV1aWQnO1xuaW1wb3J0IGlvIGZyb20gJ3NvY2tldC5pby1jbGllbnQnO1xuXG5pbXBvcnQgTWVzc2FnZUJveCBmcm9tICdAL2NvbXBvbmVudHMvTWVzc2FnZUJveCc7XG5pbXBvcnQgU2V0VXNlcm5hbWVGb3JMaXZlVGVsZXNwZWN0b3JzIGZyb20gJ0AvY29tcG9uZW50cy9Nb2RhbHMvU2V0VXNlcm5hbWVGb3JMaXZlVGVsZXNwZWN0b3JzJztcbmltcG9ydCBTRU8gZnJvbSAnQC9jb21wb25lbnRzL1NFTyc7XG5pbXBvcnQgVGl0bGUgZnJvbSAnQC9jb21wb25lbnRzL1RpdGxlJztcbmltcG9ydCBhcGkgZnJvbSAnQC9zZXJ2aWNlcy9hcGknO1xuXG5pbnRlcmZhY2UgSU1lc3NhZ2Uge1xuICBpZDogc3RyaW5nO1xuICBzZW5kZXI6IHN0cmluZztcbiAgY29udGVudDogc3RyaW5nO1xufVxuXG4vLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmVcbmludGVyZmFjZSBEZWNlYXNlZCB7XG4gIGlkPzogc3RyaW5nO1xuICBuYW1lPzogc3RyaW5nO1xuICBsaXZlX2NoYXRfbGluaz86IHN0cmluZztcbiAgZnVuZXJhbF9pbml0aWFsX2RhdGU/OiBzdHJpbmc7XG4gIGZ1bmVyYWxfZmluYWxfZGF0ZT86IHN0cmluZztcbiAgc2VwdWx0aW5nX2RhdGU/OiBzdHJpbmc7XG4gIGZ1bmVyYWw/OiB7XG4gICAgbmFtZT86IHN0cmluZztcbiAgICBjZW1ldGVyeT86IHtcbiAgICAgIG5hbWU/OiBzdHJpbmc7XG4gICAgfTtcbiAgfTtcbn1cblxuY29uc3QgTGl2ZTogUmVhY3QuRkMgPSAoKSA9PiB7XG4gIGNvbnN0IHJvdXRlciA9IHVzZVJvdXRlcigpO1xuXG4gIGNvbnN0IFtkZWNlYXNlZCwgc2V0RGVjZWFzZWRdID0gdXNlU3RhdGU8RGVjZWFzZWQ+KHt9IGFzIERlY2Vhc2VkKTtcbiAgY29uc3QgW3VzZXJuYW1lLCBzZXRVc2VybmFtZV0gPSB1c2VTdGF0ZTxzdHJpbmc+KCcnKTtcbiAgY29uc3QgW21lc3NhZ2UsIHNldE1lc3NhZ2VdID0gdXNlU3RhdGU8c3RyaW5nPignJyk7XG4gIGNvbnN0IFttZXNzYWdlcywgc2V0TWVzc2FnZXNdID0gdXNlU3RhdGU8SU1lc3NhZ2VbXT4oW10gYXMgSU1lc3NhZ2VbXSk7XG5cbiAgY29uc3Qge1xuICAgIGlzT3BlbjogaXNHZXRVc2VybmFtZU1vZGFsT3BlbixcbiAgICBvbk9wZW46IG9uT3BlbkdldFVzZXJuYW1lTW9kYWwsXG4gICAgb25DbG9zZTogb25DbG9zZUdldFVzZXJuYW1lTW9kYWwsXG4gIH0gPSB1c2VEaXNjbG9zdXJlKCk7XG5cbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBjb25zdCBxdWVyeUlkID0gcm91dGVyLnF1ZXJ5LmlkIGFzIHN0cmluZztcblxuICAgIGlmIChxdWVyeUlkID09PSB1bmRlZmluZWQpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBpZiAoIXF1ZXJ5SWQubGVuZ3RoIHx8ICFpc1V1aWQudjQocXVlcnlJZCkpIHtcbiAgICAgIHJvdXRlci5yZXBsYWNlKCcvbG9naW4nKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBvbk9wZW5HZXRVc2VybmFtZU1vZGFsKCk7XG5cbiAgICBhcGkuZ2V0KGBkZWNlYXNlZHMvJHtxdWVyeUlkfWApLnRoZW4ocmVzcG9uc2UgPT4ge1xuICAgICAgc2V0RGVjZWFzZWQocmVzcG9uc2UuZGF0YSk7XG4gICAgfSk7XG5cbiAgICBhcGkuZ2V0KGAvbWVzc2FnZXMvJHtxdWVyeUlkfWApLnRoZW4ocmVzcG9uc2UgPT4ge1xuICAgICAgc2V0TWVzc2FnZShyZXNwb25zZS5kYXRhKTtcbiAgICAgIGNvbnNvbGUubG9nKHJlc3BvbnNlLmRhdGEpO1xuICAgIH0pO1xuICB9LCBbcm91dGVyLnF1ZXJ5LmlkXSk7XG5cbiAgY29uc3Qgb25TYXZlVXNlcm5hbWUgPSB1c2VDYWxsYmFjayhcbiAgICAobmFtZTogc3RyaW5nKSA9PiB7XG4gICAgICBzZXRVc2VybmFtZShuYW1lKTtcblxuICAgICAgb25DbG9zZUdldFVzZXJuYW1lTW9kYWwoKTtcblxuICAgICAgY29uc3Qgc29ja2V0ID0gaW8ocHJvY2Vzcy5lbnYuTkVYVF9QVUJMSUNfQVBJX1VSTCwge1xuICAgICAgICBxdWVyeTogeyB1c2VybmFtZTogbmFtZSB9LFxuICAgICAgfSk7XG5cbiAgICAgIHNvY2tldC5lbWl0KCdqb2luJywgZGVjZWFzZWQuaWQpO1xuXG4gICAgICBzb2NrZXQub24oJ25ldycsIChtc2c6IElNZXNzYWdlKSA9PiB7XG4gICAgICAgIHNldE1lc3NhZ2VzKHN0YXRlID0+IFsuLi5zdGF0ZSwgbXNnXSk7XG4gICAgICB9KTtcbiAgICB9LFxuICAgIFtkZWNlYXNlZF0sXG4gICk7XG5cbiAgY29uc3QgaGFuZGxlU3VibWl0TWVzc2FnZSA9IHVzZUNhbGxiYWNrKGFzeW5jICgpID0+IHtcbiAgICBzZXRNZXNzYWdlKCcnKTtcblxuICAgIGNvbnN0IG1lc3NhZ2VEYXRhID0ge1xuICAgICAgc2VuZGVyOiB1c2VybmFtZSxcbiAgICAgIGNvbnRlbnQ6IG1lc3NhZ2UsXG4gICAgICBjaGFubmVsOiBkZWNlYXNlZC5pZCxcbiAgICB9O1xuXG4gICAgYXdhaXQgYXBpLnBvc3QoJy9tZXNzYWdlcycsIG1lc3NhZ2VEYXRhKS50aGVuKHJlc3BvbnNlID0+IHtcbiAgICAgIHNldE1lc3NhZ2UocmVzcG9uc2UuZGF0YSk7XG4gICAgfSk7XG4gIH0sIFttZXNzYWdlLCB1c2VybmFtZSwgZGVjZWFzZWRdKTtcblxuICByZXR1cm4gKFxuICAgIDw+XG4gICAgICA8U0VPXG4gICAgICAgIHRpdGxlPVwiRW5kb3JcIlxuICAgICAgICBpbWFnZT1cIm9nL2Jvb3N0LnBuZ1wiXG4gICAgICAgIHNob3VsZEV4Y2x1ZGVUaXRsZVN1ZmZpeFxuICAgICAgICBkZXNjcmlwdGlvbj1cIkZhemVyIGxvZ2luIG5hIHBsYXRhZm9ybWFcIlxuICAgICAgLz5cblxuICAgICAgPFNldFVzZXJuYW1lRm9yTGl2ZVRlbGVzcGVjdG9yc1xuICAgICAgICBvblNhdmU9e29uU2F2ZVVzZXJuYW1lfVxuICAgICAgICBpc09wZW49e2lzR2V0VXNlcm5hbWVNb2RhbE9wZW59XG4gICAgICAgIG9uQ2xvc2U9e29uQ2xvc2VHZXRVc2VybmFtZU1vZGFsfVxuICAgICAgLz5cblxuICAgICAgPEJveFxuICAgICAgICBkaXNwbGF5PVwiZ3JpZFwiXG4gICAgICAgIGdyaWRUZW1wbGF0ZUNvbHVtbnM9XCI3NSUgMjUlXCJcbiAgICAgICAgYXM9XCJtYWluXCJcbiAgICAgICAgaGVpZ2h0PVwiMTAwdmhcIlxuICAgICAgICB3aWR0aD1cIjEwMCVcIlxuICAgICAgICBwYWRkaW5nWD17Nn1cbiAgICAgICAgYmFja2dyb3VuZENvbG9yPVwiZ3JheS45MDBcIlxuICAgICAgICBwYWRkaW5nVG9wPXs4fVxuICAgICAgICBwYWRkaW5nQm90dG9tPXs4fVxuICAgICAgICBwYWRkaW5nUmlnaHQ9ezh9XG4gICAgICA+XG4gICAgICAgIDxGbGV4IGRpcmVjdGlvbj1cImNvbHVtblwiIG1hcmdpblJpZ2h0PXs4fT5cbiAgICAgICAgICA8aWZyYW1lXG4gICAgICAgICAgICBzcmM9e2RlY2Vhc2VkLmxpdmVfY2hhdF9saW5rfVxuICAgICAgICAgICAgZnJhbWVCb3JkZXI9XCIwXCJcbiAgICAgICAgICAgIHRpdGxlPXtkZWNlYXNlZC5pZH1cbiAgICAgICAgICAgIHN0eWxlPXt7IHdpZHRoOiAnMTAwJScsIGhlaWdodDogJzc1JScgfX1cbiAgICAgICAgICA+PC9pZnJhbWU+XG4gICAgICAgICAgPEZsZXhcbiAgICAgICAgICAgIGJhY2tncm91bmRDb2xvcj1cImdyYXkuODAwXCJcbiAgICAgICAgICAgIG1hcmdpblRvcD17OH1cbiAgICAgICAgICAgIHBhZGRpbmdUb3A9ezZ9XG4gICAgICAgICAgICBwYWRkaW5nUmlnaHQ9ezZ9XG4gICAgICAgICAgICBwYWRkaW5nTGVmdD17Nn1cbiAgICAgICAgICAgIHBhZGRpbmdCb3R0b209ezZ9XG4gICAgICAgICAgICBib3JkZXJSYWRpdXM9XCJtZFwiXG4gICAgICAgICAgICB3aWR0aD1cIjEwMCVcIlxuICAgICAgICAgICAgaGVpZ2h0PVwiMjUlXCJcbiAgICAgICAgICA+XG4gICAgICAgICAgICA8Qm94IHdpZHRoPVwiMTAwJVwiIGNvbG9yPVwiZ3JheS4yMDBcIj5cbiAgICAgICAgICAgICAgPFRpdGxlIGNzcz17eyBjb2xvcjogJ2dyYXkuMjAwJyB9fT57ZGVjZWFzZWQubmFtZX08L1RpdGxlPlxuICAgICAgICAgICAgICA8VGV4dCBmb250U2l6ZT1cInhsXCI+e2RlY2Vhc2VkPy5mdW5lcmFsPy5uYW1lfTwvVGV4dD5cbiAgICAgICAgICAgICAge2RlY2Vhc2VkLmZ1bmVyYWxfZmluYWxfZGF0ZSAmJlxuICAgICAgICAgICAgICAgIGRlY2Vhc2VkLmZ1bmVyYWxfaW5pdGlhbF9kYXRlICYmXG4gICAgICAgICAgICAgICAgZGVjZWFzZWQuc2VwdWx0aW5nX2RhdGUgJiYgKFxuICAgICAgICAgICAgICAgICAgPD5cbiAgICAgICAgICAgICAgICAgICAgPEZsZXg+XG4gICAgICAgICAgICAgICAgICAgICAgPFRleHQgZm9udFNpemU9XCJ4bFwiPlxuICAgICAgICAgICAgICAgICAgICAgICAge2Zvcm1hdChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgbmV3IERhdGUoZGVjZWFzZWQuZnVuZXJhbF9pbml0aWFsX2RhdGUpLFxuICAgICAgICAgICAgICAgICAgICAgICAgICBcIidWZWzDs3JpbzogJ2RkJy8nTU0nLyd5eXl5ICdkYXMnIEhIOm1tXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgIHsgbG9jYWxlOiBwdEJSIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAgICAgICAgeycgw6BzICd9XG4gICAgICAgICAgICAgICAgICAgICAgICB7Zm9ybWF0KFxuICAgICAgICAgICAgICAgICAgICAgICAgICBuZXcgRGF0ZShkZWNlYXNlZC5mdW5lcmFsX2ZpbmFsX2RhdGUpLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAnSEg6bW0nLFxuICAgICAgICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbG9jYWxlOiBwdEJSLFxuICAgICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgICAgICA8L1RleHQ+XG4gICAgICAgICAgICAgICAgICAgIDwvRmxleD5cbiAgICAgICAgICAgICAgICAgICAgPEZsZXg+XG4gICAgICAgICAgICAgICAgICAgICAgPFRleHQgZm9udFNpemU9XCJ4bFwiPlxuICAgICAgICAgICAgICAgICAgICAgICAge2Zvcm1hdChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgbmV3IERhdGUoZGVjZWFzZWQuc2VwdWx0aW5nX2RhdGUpLFxuICAgICAgICAgICAgICAgICAgICAgICAgICBcIidTZXB1bHRhbWVudG86ICdkZCcvJ01NJy8neXl5eSAnw6BzJyBISDptbVwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICB7IGxvY2FsZTogcHRCUiB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgICAgICA8L1RleHQ+XG4gICAgICAgICAgICAgICAgICAgIDwvRmxleD5cbiAgICAgICAgICAgICAgICAgIDwvPlxuICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICA8L0JveD5cbiAgICAgICAgICA8L0ZsZXg+XG4gICAgICAgIDwvRmxleD5cbiAgICAgICAgPEZsZXhcbiAgICAgICAgICBkaXJlY3Rpb249XCJjb2x1bW5cIlxuICAgICAgICAgIGJhY2tncm91bmRDb2xvcj1cImdyYXkuODAwXCJcbiAgICAgICAgICBib3JkZXJSYWRpdXM9XCJtZFwiXG4gICAgICAgICAgd2lkdGg9XCIxMDAlXCJcbiAgICAgICAgICBoZWlnaHQ9XCIxMDAlXCJcbiAgICAgICAgICBwYWRkaW5nPXs2fVxuICAgICAgICA+XG4gICAgICAgICAgPEJveCB3aWR0aD1cIjEwMCVcIiBjb2xvcj1cImdyYXkuMjAwXCI+XG4gICAgICAgICAgICA8VGl0bGUgY3NzPXt7IGNvbG9yOiAnZ3JheS4yMDAnIH19PkNoYXQ8L1RpdGxlPlxuICAgICAgICAgIDwvQm94PlxuICAgICAgICAgIDxGbGV4XG4gICAgICAgICAgICBkaXJlY3Rpb249XCJjb2x1bW5cIlxuICAgICAgICAgICAgd2lkdGg9XCIxMDAlXCJcbiAgICAgICAgICAgIGhlaWdodD1cIjg4JVwiXG4gICAgICAgICAgICBvdmVyZmxvd1k9XCJhdXRvXCJcbiAgICAgICAgICAgIGJvcmRlckJvdHRvbT1cIjJweCBzb2xpZCAjZmZmXCJcbiAgICAgICAgICA+XG4gICAgICAgICAgICB7bWVzc2FnZXMubWFwKGFjdHVhbE1lc3NhZ2UgPT4gKFxuICAgICAgICAgICAgICA8TWVzc2FnZUJveFxuICAgICAgICAgICAgICAgIGtleT17YWN0dWFsTWVzc2FnZS5pZH1cbiAgICAgICAgICAgICAgICB1c2VybmFtZT17YWN0dWFsTWVzc2FnZS5zZW5kZXJ9XG4gICAgICAgICAgICAgICAgbWVzc2FnZT17YWN0dWFsTWVzc2FnZS5jb250ZW50fVxuICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgKSl9XG4gICAgICAgICAgPC9GbGV4PlxuICAgICAgICAgIDxGbGV4IHdpZHRoPVwiMTAwJVwiIGhlaWdodD1cIjEyJVwiIHBhZGRpbmdUb3A9ezJ9PlxuICAgICAgICAgICAgPFRleHRhcmVhXG4gICAgICAgICAgICAgIG9uQ2hhbmdlPXtlID0+IHNldE1lc3NhZ2UoZS50YXJnZXQudmFsdWUpfVxuICAgICAgICAgICAgICB2YWx1ZT17bWVzc2FnZX1cbiAgICAgICAgICAgICAgcGxhY2Vob2xkZXI9XCJEaWdpdGUgc3VhIG1lbnNhZ2VtXCJcbiAgICAgICAgICAgICAgY29sb3I9XCJXaGl0ZVwiXG4gICAgICAgICAgICAgIHdpZHRoPVwiODYlXCJcbiAgICAgICAgICAgICAgYm9yZGVyPXswfVxuICAgICAgICAgICAgICBtaW5IZWlnaHQ9ezJ9XG4gICAgICAgICAgICAgIGhlaWdodD1cIjEwMCVcIlxuICAgICAgICAgICAgICByZXNpemU9XCJub25lXCJcbiAgICAgICAgICAgICAgYm9yZGVyUmFkaXVzPVwiOHB4IDAgMCA4cHhcIlxuICAgICAgICAgICAgICBiYWNrZ3JvdW5kQ29sb3I9XCJncmF5LjcwMFwiXG4gICAgICAgICAgICAvPlxuICAgICAgICAgICAgPFRvb2x0aXAgbGFiZWw9XCJFbnZpYXIgbWVuc2FnZW1cIiBhcmlhLWxhYmVsPVwiRW52aWFyIG1lbnNhZ2VtXCI+XG4gICAgICAgICAgICAgIDxCdXR0b25cbiAgICAgICAgICAgICAgICBvbkNsaWNrPXtoYW5kbGVTdWJtaXRNZXNzYWdlfVxuICAgICAgICAgICAgICAgIHdpZHRoPVwiMTQlXCJcbiAgICAgICAgICAgICAgICBoZWlnaHQ9XCIxMDAlXCJcbiAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kQ29sb3I9XCJncmF5LjcwMFwiXG4gICAgICAgICAgICAgICAgYm9yZGVyUmFkaXVzPVwiMCA4cHggOHB4IDBcIlxuICAgICAgICAgICAgICAgIGFsaWduSXRlbXM9XCJjZW50ZXJcIlxuICAgICAgICAgICAgICAgIGp1c3RpZnlDb250ZW50PVwiY2VudGVyXCJcbiAgICAgICAgICAgICAgICBfaG92ZXI9e3tcbiAgICAgICAgICAgICAgICAgIGJhY2tncm91bmRDb2xvcjogJ2dyYXkuOTAwJyxcbiAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgPEZpU2VuZCBjb2xvcj1cIldoaXRlXCIgc2l6ZT17MjB9IC8+XG4gICAgICAgICAgICAgIDwvQnV0dG9uPlxuICAgICAgICAgICAgPC9Ub29sdGlwPlxuICAgICAgICAgIDwvRmxleD5cbiAgICAgICAgPC9GbGV4PlxuICAgICAgPC9Cb3g+XG4gICAgPC8+XG4gICk7XG59O1xuXG5leHBvcnQgZGVmYXVsdCBMaXZlO1xuIl19 */\",\n  toString: _EMOTION_STRINGIFIED_CSS_ERROR__\n};\n\nconst Live = () => {\n  var _deceased$funeral;\n\n  const router = useRouter();\n  const {\n    0: deceased,\n    1: setDeceased\n  } = useState({});\n  const {\n    0: username,\n    1: setUsername\n  } = useState('');\n  const {\n    0: message,\n    1: setMessage\n  } = useState('');\n  const {\n    0: messages,\n    1: setMessages\n  } = useState([]);\n  const {\n    isOpen: isGetUsernameModalOpen,\n    onOpen: onOpenGetUsernameModal,\n    onClose: onCloseGetUsernameModal\n  } = useDisclosure();\n  useEffect(() => {\n    const queryId = router.query.id;\n\n    if (queryId === undefined) {\n      return;\n    }\n\n    if (!queryId.length || !isUuid.v4(queryId)) {\n      router.replace('/login');\n      return;\n    }\n\n    onOpenGetUsernameModal();\n    api.get(`deceaseds/${queryId}`).then(response => {\n      setDeceased(response.data);\n    });\n    api.get(`/messages/${queryId}`).then(response => {\n      setMessage(response.data);\n      console.log(response.data);\n    });\n  }, [router.query.id]);\n  const onSaveUsername = useCallback(name => {\n    setUsername(name);\n    onCloseGetUsernameModal();\n    const socket = io(process.env.NEXT_PUBLIC_API_URL, {\n      query: {\n        username: name\n      }\n    });\n    socket.emit('join', deceased.id);\n    socket.on('new', msg => {\n      setMessages(state => [...state, msg]);\n    });\n  }, [deceased]);\n  const handleSubmitMessage = useCallback(async () => {\n    setMessage('');\n    const messageData = {\n      sender: username,\n      content: message,\n      channel: deceased.id\n    };\n    await api.post('/messages', messageData).then(response => {\n      setMessage(response.data);\n    });\n  }, [message, username, deceased]);\n  return ___EmotionJSX(React.Fragment, null, ___EmotionJSX(SEO, {\n    title: \"Endor\",\n    image: \"og/boost.png\",\n    shouldExcludeTitleSuffix: true,\n    description: \"Fazer login na plataforma\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 120,\n      columnNumber: 7\n    }\n  }), ___EmotionJSX(SetUsernameForLiveTelespectors, {\n    onSave: onSaveUsername,\n    isOpen: isGetUsernameModalOpen,\n    onClose: onCloseGetUsernameModal,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 127,\n      columnNumber: 7\n    }\n  }), ___EmotionJSX(Box, {\n    display: \"grid\",\n    gridTemplateColumns: \"75% 25%\",\n    as: \"main\",\n    height: \"100vh\",\n    width: \"100%\",\n    paddingX: 6,\n    backgroundColor: \"gray.900\",\n    paddingTop: 8,\n    paddingBottom: 8,\n    paddingRight: 8,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 133,\n      columnNumber: 7\n    }\n  }, ___EmotionJSX(Flex, {\n    direction: \"column\",\n    marginRight: 8,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 145,\n      columnNumber: 9\n    }\n  }, ___EmotionJSX(\"iframe\", {\n    src: deceased.live_chat_link,\n    frameBorder: \"0\",\n    title: deceased.id,\n    style: {\n      width: '100%',\n      height: '75%'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 146,\n      columnNumber: 11\n    }\n  }), ___EmotionJSX(Flex, {\n    backgroundColor: \"gray.800\",\n    marginTop: 8,\n    paddingTop: 6,\n    paddingRight: 6,\n    paddingLeft: 6,\n    paddingBottom: 6,\n    borderRadius: \"md\",\n    width: \"100%\",\n    height: \"25%\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 152,\n      columnNumber: 11\n    }\n  }, ___EmotionJSX(Box, {\n    width: \"100%\",\n    color: \"gray.200\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 163,\n      columnNumber: 13\n    }\n  }, ___EmotionJSX(Title, {\n    css: _ref,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 164,\n      columnNumber: 15\n    }\n  }, deceased.name), ___EmotionJSX(Text, {\n    fontSize: \"xl\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 165,\n      columnNumber: 15\n    }\n  }, deceased === null || deceased === void 0 ? void 0 : (_deceased$funeral = deceased.funeral) === null || _deceased$funeral === void 0 ? void 0 : _deceased$funeral.name), deceased.funeral_final_date && deceased.funeral_initial_date && deceased.sepulting_date && ___EmotionJSX(React.Fragment, null, ___EmotionJSX(Flex, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 170,\n      columnNumber: 21\n    }\n  }, ___EmotionJSX(Text, {\n    fontSize: \"xl\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 171,\n      columnNumber: 23\n    }\n  }, format(new Date(deceased.funeral_initial_date), \"'Velório: 'dd'/'MM'/'yyyy 'das' HH:mm\", {\n    locale: ptBR\n  }), ' às ', format(new Date(deceased.funeral_final_date), 'HH:mm', {\n    locale: ptBR\n  }))), ___EmotionJSX(Flex, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 187,\n      columnNumber: 21\n    }\n  }, ___EmotionJSX(Text, {\n    fontSize: \"xl\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 188,\n      columnNumber: 23\n    }\n  }, format(new Date(deceased.sepulting_date), \"'Sepultamento: 'dd'/'MM'/'yyyy 'às' HH:mm\", {\n    locale: ptBR\n  }))))))), ___EmotionJSX(Flex, {\n    direction: \"column\",\n    backgroundColor: \"gray.800\",\n    borderRadius: \"md\",\n    width: \"100%\",\n    height: \"100%\",\n    padding: 6,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 201,\n      columnNumber: 9\n    }\n  }, ___EmotionJSX(Box, {\n    width: \"100%\",\n    color: \"gray.200\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 209,\n      columnNumber: 11\n    }\n  }, ___EmotionJSX(Title, {\n    css: _ref2,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 210,\n      columnNumber: 13\n    }\n  }, \"Chat\")), ___EmotionJSX(Flex, {\n    direction: \"column\",\n    width: \"100%\",\n    height: \"88%\",\n    overflowY: \"auto\",\n    borderBottom: \"2px solid #fff\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 212,\n      columnNumber: 11\n    }\n  }, messages.map(actualMessage => ___EmotionJSX(MessageBox, {\n    key: actualMessage.id,\n    username: actualMessage.sender,\n    message: actualMessage.content,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 220,\n      columnNumber: 15\n    }\n  }))), ___EmotionJSX(Flex, {\n    width: \"100%\",\n    height: \"12%\",\n    paddingTop: 2,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 227,\n      columnNumber: 11\n    }\n  }, ___EmotionJSX(Textarea, {\n    onChange: e => setMessage(e.target.value),\n    value: message,\n    placeholder: \"Digite sua mensagem\",\n    color: \"White\",\n    width: \"86%\",\n    border: 0,\n    minHeight: 2,\n    height: \"100%\",\n    resize: \"none\",\n    borderRadius: \"8px 0 0 8px\",\n    backgroundColor: \"gray.700\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 228,\n      columnNumber: 13\n    }\n  }), ___EmotionJSX(Tooltip, {\n    label: \"Enviar mensagem\",\n    \"aria-label\": \"Enviar mensagem\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 241,\n      columnNumber: 13\n    }\n  }, ___EmotionJSX(Button, {\n    onClick: handleSubmitMessage,\n    width: \"14%\",\n    height: \"100%\",\n    backgroundColor: \"gray.700\",\n    borderRadius: \"0 8px 8px 0\",\n    alignItems: \"center\",\n    justifyContent: \"center\",\n    _hover: {\n      backgroundColor: 'gray.900'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 242,\n      columnNumber: 15\n    }\n  }, ___EmotionJSX(FiSend, {\n    color: \"White\",\n    size: 20,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 254,\n      columnNumber: 17\n    }\n  })))))));\n};\n\nexport default Live;","map":{"version":3,"sources":["/home/matheus/Documents/drive-sync/Projects/endor/packages/web/src/pages/live.tsx"],"names":["useRouter","React","useCallback","useEffect","useState","FiSend","Flex","Box","Text","Textarea","Button","Tooltip","useDisclosure","format","ptBR","isUuid","io","MessageBox","SetUsernameForLiveTelespectors","SEO","Title","api","Live","router","deceased","setDeceased","username","setUsername","message","setMessage","messages","setMessages","isOpen","isGetUsernameModalOpen","onOpen","onOpenGetUsernameModal","onClose","onCloseGetUsernameModal","queryId","query","id","undefined","length","v4","replace","get","then","response","data","console","log","onSaveUsername","name","socket","process","env","NEXT_PUBLIC_API_URL","emit","on","msg","state","handleSubmitMessage","messageData","sender","content","channel","post","live_chat_link","width","height","funeral","funeral_final_date","funeral_initial_date","sepulting_date","Date","locale","map","actualMessage","e","target","value","backgroundColor"],"mappings":"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","sourcesContent":["import { useRouter } from 'next/router';\nimport React, { useCallback, useEffect, useState } from 'react';\nimport { FiSend } from 'react-icons/fi';\n\nimport {\n  Flex,\n  Box,\n  Text,\n  Textarea,\n  Button,\n  Tooltip,\n  useDisclosure,\n} from '@chakra-ui/core';\nimport { format } from 'date-fns';\nimport { ptBR } from 'date-fns/locale';\nimport isUuid from 'is-uuid';\nimport io from 'socket.io-client';\n\nimport MessageBox from '@/components/MessageBox';\nimport SetUsernameForLiveTelespectors from '@/components/Modals/SetUsernameForLiveTelespectors';\nimport SEO from '@/components/SEO';\nimport Title from '@/components/Title';\nimport api from '@/services/api';\n\ninterface IMessage {\n  id: string;\n  sender: string;\n  content: string;\n}\n\n// eslint-disable-next-line\ninterface Deceased {\n  id?: string;\n  name?: string;\n  live_chat_link?: string;\n  funeral_initial_date?: string;\n  funeral_final_date?: string;\n  sepulting_date?: string;\n  funeral?: {\n    name?: string;\n    cemetery?: {\n      name?: string;\n    };\n  };\n}\n\nconst Live: React.FC = () => {\n  const router = useRouter();\n\n  const [deceased, setDeceased] = useState<Deceased>({} as Deceased);\n  const [username, setUsername] = useState<string>('');\n  const [message, setMessage] = useState<string>('');\n  const [messages, setMessages] = useState<IMessage[]>([] as IMessage[]);\n\n  const {\n    isOpen: isGetUsernameModalOpen,\n    onOpen: onOpenGetUsernameModal,\n    onClose: onCloseGetUsernameModal,\n  } = useDisclosure();\n\n  useEffect(() => {\n    const queryId = router.query.id as string;\n\n    if (queryId === undefined) {\n      return;\n    }\n\n    if (!queryId.length || !isUuid.v4(queryId)) {\n      router.replace('/login');\n      return;\n    }\n\n    onOpenGetUsernameModal();\n\n    api.get(`deceaseds/${queryId}`).then(response => {\n      setDeceased(response.data);\n    });\n\n    api.get(`/messages/${queryId}`).then(response => {\n      setMessage(response.data);\n      console.log(response.data);\n    });\n  }, [router.query.id]);\n\n  const onSaveUsername = useCallback(\n    (name: string) => {\n      setUsername(name);\n\n      onCloseGetUsernameModal();\n\n      const socket = io(process.env.NEXT_PUBLIC_API_URL, {\n        query: { username: name },\n      });\n\n      socket.emit('join', deceased.id);\n\n      socket.on('new', (msg: IMessage) => {\n        setMessages(state => [...state, msg]);\n      });\n    },\n    [deceased],\n  );\n\n  const handleSubmitMessage = useCallback(async () => {\n    setMessage('');\n\n    const messageData = {\n      sender: username,\n      content: message,\n      channel: deceased.id,\n    };\n\n    await api.post('/messages', messageData).then(response => {\n      setMessage(response.data);\n    });\n  }, [message, username, deceased]);\n\n  return (\n    <>\n      <SEO\n        title=\"Endor\"\n        image=\"og/boost.png\"\n        shouldExcludeTitleSuffix\n        description=\"Fazer login na plataforma\"\n      />\n\n      <SetUsernameForLiveTelespectors\n        onSave={onSaveUsername}\n        isOpen={isGetUsernameModalOpen}\n        onClose={onCloseGetUsernameModal}\n      />\n\n      <Box\n        display=\"grid\"\n        gridTemplateColumns=\"75% 25%\"\n        as=\"main\"\n        height=\"100vh\"\n        width=\"100%\"\n        paddingX={6}\n        backgroundColor=\"gray.900\"\n        paddingTop={8}\n        paddingBottom={8}\n        paddingRight={8}\n      >\n        <Flex direction=\"column\" marginRight={8}>\n          <iframe\n            src={deceased.live_chat_link}\n            frameBorder=\"0\"\n            title={deceased.id}\n            style={{ width: '100%', height: '75%' }}\n          ></iframe>\n          <Flex\n            backgroundColor=\"gray.800\"\n            marginTop={8}\n            paddingTop={6}\n            paddingRight={6}\n            paddingLeft={6}\n            paddingBottom={6}\n            borderRadius=\"md\"\n            width=\"100%\"\n            height=\"25%\"\n          >\n            <Box width=\"100%\" color=\"gray.200\">\n              <Title css={{ color: 'gray.200' }}>{deceased.name}</Title>\n              <Text fontSize=\"xl\">{deceased?.funeral?.name}</Text>\n              {deceased.funeral_final_date &&\n                deceased.funeral_initial_date &&\n                deceased.sepulting_date && (\n                  <>\n                    <Flex>\n                      <Text fontSize=\"xl\">\n                        {format(\n                          new Date(deceased.funeral_initial_date),\n                          \"'Velório: 'dd'/'MM'/'yyyy 'das' HH:mm\",\n                          { locale: ptBR },\n                        )}\n                        {' às '}\n                        {format(\n                          new Date(deceased.funeral_final_date),\n                          'HH:mm',\n                          {\n                            locale: ptBR,\n                          },\n                        )}\n                      </Text>\n                    </Flex>\n                    <Flex>\n                      <Text fontSize=\"xl\">\n                        {format(\n                          new Date(deceased.sepulting_date),\n                          \"'Sepultamento: 'dd'/'MM'/'yyyy 'às' HH:mm\",\n                          { locale: ptBR },\n                        )}\n                      </Text>\n                    </Flex>\n                  </>\n                )}\n            </Box>\n          </Flex>\n        </Flex>\n        <Flex\n          direction=\"column\"\n          backgroundColor=\"gray.800\"\n          borderRadius=\"md\"\n          width=\"100%\"\n          height=\"100%\"\n          padding={6}\n        >\n          <Box width=\"100%\" color=\"gray.200\">\n            <Title css={{ color: 'gray.200' }}>Chat</Title>\n          </Box>\n          <Flex\n            direction=\"column\"\n            width=\"100%\"\n            height=\"88%\"\n            overflowY=\"auto\"\n            borderBottom=\"2px solid #fff\"\n          >\n            {messages.map(actualMessage => (\n              <MessageBox\n                key={actualMessage.id}\n                username={actualMessage.sender}\n                message={actualMessage.content}\n              />\n            ))}\n          </Flex>\n          <Flex width=\"100%\" height=\"12%\" paddingTop={2}>\n            <Textarea\n              onChange={e => setMessage(e.target.value)}\n              value={message}\n              placeholder=\"Digite sua mensagem\"\n              color=\"White\"\n              width=\"86%\"\n              border={0}\n              minHeight={2}\n              height=\"100%\"\n              resize=\"none\"\n              borderRadius=\"8px 0 0 8px\"\n              backgroundColor=\"gray.700\"\n            />\n            <Tooltip label=\"Enviar mensagem\" aria-label=\"Enviar mensagem\">\n              <Button\n                onClick={handleSubmitMessage}\n                width=\"14%\"\n                height=\"100%\"\n                backgroundColor=\"gray.700\"\n                borderRadius=\"0 8px 8px 0\"\n                alignItems=\"center\"\n                justifyContent=\"center\"\n                _hover={{\n                  backgroundColor: 'gray.900',\n                }}\n              >\n                <FiSend color=\"White\" size={20} />\n              </Button>\n            </Tooltip>\n          </Flex>\n        </Flex>\n      </Box>\n    </>\n  );\n};\n\nexport default Live;\n"]},"metadata":{},"sourceType":"module"}