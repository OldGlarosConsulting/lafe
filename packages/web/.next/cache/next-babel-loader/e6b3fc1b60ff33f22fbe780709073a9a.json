{"ast":null,"code":"var _jsxFileName = \"/home/matheus/Documents/drive-sync/Projects/lafe/packages/web/src/pages/login.tsx\";\nvar __jsx = React.createElement;\nimport React, { useCallback, useRef } from 'react';\nimport { FiLock, FiMail } from 'react-icons/fi';\nimport NextLink from 'next/link';\nimport { useRouter } from 'next/router';\nimport * as Yup from 'yup';\nimport Input from '@/components/Input';\nimport SEO from '@/components/SEO';\nimport { useAuthentication } from '@/hooks/authentication';\nimport getValidationErrors from '@/utils/getValidationErrors';\nimport { useToast, Button, Flex, Heading, Link } from '@chakra-ui/core';\nimport { Form } from '@unform/web';\nimport { jsx as ___EmotionJSX } from \"@emotion/core\";\n\nconst Login = () => {\n  const formRef = useRef(null);\n  const router = useRouter();\n  const toast = useToast();\n  const {\n    logIn\n  } = useAuthentication();\n  const handleSubmit = useCallback(async data => {\n    try {\n      var _formRef$current;\n\n      (_formRef$current = formRef.current) === null || _formRef$current === void 0 ? void 0 : _formRef$current.setErrors({});\n      const schema = Yup.object().shape({\n        email: Yup.string().email().required('E-mail obrigatório'),\n        password: Yup.string().required('Senha obrigatória')\n      });\n      await schema.validate(data, {\n        abortEarly: false\n      });\n      await logIn(data);\n      toast({\n        status: 'success',\n        title: 'Autenticado com sucesso',\n        description: 'Você está sendo redirecionado para a página inicial.',\n        position: 'top',\n        duration: 3000\n      });\n      router.replace('/dashboard');\n    } catch (err) {\n      if (err instanceof Yup.ValidationError) {\n        var _formRef$current2;\n\n        const errors = getValidationErrors(err);\n        (_formRef$current2 = formRef.current) === null || _formRef$current2 === void 0 ? void 0 : _formRef$current2.setErrors(errors);\n        return;\n      }\n\n      toast({\n        status: 'error',\n        title: 'Erro na autenticação',\n        description: 'Ocorreu um erro ao fazer login, cheque as credenciais.',\n        position: 'top',\n        duration: 5000\n      });\n    }\n  }, [logIn, router, toast]);\n  return ___EmotionJSX(React.Fragment, null, ___EmotionJSX(SEO, {\n    title: \"Lafe\",\n    image: \"og/boost.png\",\n    shouldExcludeTitleSuffix: true,\n    description: \"Fazer login na plataforma\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 7\n    }\n  }), ___EmotionJSX(Flex, {\n    as: \"main\",\n    height: \"100vh\",\n    justifyContent: \"center\",\n    alignItems: \"center\",\n    paddingX: 6,\n    backgroundColor: \"blue.300\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 7\n    }\n  }, ___EmotionJSX(Flex, {\n    backgroundColor: \"blue.600\",\n    borderRadius: \"md\",\n    flexDirection: \"column\",\n    alignItems: \"stretch\",\n    padding: 16,\n    boxShadow: \"xl\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 9\n    }\n  }, ___EmotionJSX(Form, {\n    ref: formRef,\n    onSubmit: handleSubmit,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 99,\n      columnNumber: 11\n    }\n  }, ___EmotionJSX(Heading, {\n    color: \"gray.200\",\n    marginBottom: 6,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 100,\n      columnNumber: 13\n    }\n  }, \"Login\"), ___EmotionJSX(Input, {\n    name: \"email\",\n    icon: FiMail,\n    placeholder: \"E-mail\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 103,\n      columnNumber: 13\n    }\n  }), ___EmotionJSX(Input, {\n    name: \"password\",\n    icon: FiLock,\n    type: \"password\",\n    placeholder: \"Senha\",\n    containerProps: {\n      marginTop: 3\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 104,\n      columnNumber: 13\n    }\n  }), ___EmotionJSX(Button, {\n    type: \"submit\",\n    bg: \"gray.400\",\n    color: \"gray.800\",\n    _hover: {\n      bg: 'gray.500',\n      color: 'gray.900'\n    },\n    _focusWithin: {\n      bg: 'gray.500',\n      color: 'gray.900'\n    },\n    width: \"100%\",\n    marginY: 4,\n    paddingY: 6,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 113,\n      columnNumber: 13\n    }\n  }, \"Entrar\"), ___EmotionJSX(NextLink, {\n    href: \"forgot-password\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 131,\n      columnNumber: 13\n    }\n  }, ___EmotionJSX(Link, {\n    color: \"gray.500\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 132,\n      columnNumber: 15\n    }\n  }, \"Esqueci minha senha\"))))));\n};\n\nexport default Login;","map":{"version":3,"sources":["/home/matheus/Documents/drive-sync/Projects/lafe/packages/web/src/pages/login.tsx"],"names":["React","useCallback","useRef","FiLock","FiMail","NextLink","useRouter","Yup","Input","SEO","useAuthentication","getValidationErrors","useToast","Button","Flex","Heading","Link","Form","Login","formRef","router","toast","logIn","handleSubmit","data","current","setErrors","schema","object","shape","email","string","required","password","validate","abortEarly","status","title","description","position","duration","replace","err","ValidationError","errors","marginTop","bg","color"],"mappings":"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","sourcesContent":["import React, { useCallback, useRef } from 'react';\nimport { FiLock, FiMail } from 'react-icons/fi';\n\nimport NextLink from 'next/link';\nimport { useRouter } from 'next/router';\nimport * as Yup from 'yup';\n\nimport Input from '@/components/Input';\nimport SEO from '@/components/SEO';\nimport { useAuthentication } from '@/hooks/authentication';\nimport getValidationErrors from '@/utils/getValidationErrors';\nimport { useToast, Button, Flex, Heading, Link } from '@chakra-ui/core';\nimport { FormHandles } from '@unform/core';\nimport { Form } from '@unform/web';\n\ninterface IFormData {\n  email: string;\n  password: string;\n}\n\nconst Login: React.FC = () => {\n  const formRef = useRef<FormHandles>(null);\n\n  const router = useRouter();\n\n  const toast = useToast();\n\n  const { logIn } = useAuthentication();\n\n  const handleSubmit = useCallback(\n    async (data: IFormData) => {\n      try {\n        formRef.current?.setErrors({});\n\n        const schema = Yup.object().shape({\n          email: Yup.string().email().required('E-mail obrigatório'),\n          password: Yup.string().required('Senha obrigatória'),\n        });\n\n        await schema.validate(data, { abortEarly: false });\n\n        await logIn(data);\n\n        toast({\n          status: 'success',\n          title: 'Autenticado com sucesso',\n          description: 'Você está sendo redirecionado para a página inicial.',\n          position: 'top',\n          duration: 3000,\n        });\n\n        router.replace('/dashboard');\n      } catch (err) {\n        if (err instanceof Yup.ValidationError) {\n          const errors = getValidationErrors(err);\n\n          formRef.current?.setErrors(errors);\n\n          return;\n        }\n\n        toast({\n          status: 'error',\n          title: 'Erro na autenticação',\n          description: 'Ocorreu um erro ao fazer login, cheque as credenciais.',\n          position: 'top',\n          duration: 5000,\n        });\n      }\n    },\n    [logIn, router, toast],\n  );\n\n  return (\n    <>\n      <SEO\n        title=\"Lafe\"\n        image=\"og/boost.png\"\n        shouldExcludeTitleSuffix\n        description=\"Fazer login na plataforma\"\n      />\n\n      <Flex\n        as=\"main\"\n        height=\"100vh\"\n        justifyContent=\"center\"\n        alignItems=\"center\"\n        paddingX={6}\n        backgroundColor=\"blue.300\"\n      >\n        <Flex\n          backgroundColor=\"blue.600\"\n          borderRadius=\"md\"\n          flexDirection=\"column\"\n          alignItems=\"stretch\"\n          padding={16}\n          boxShadow=\"xl\"\n        >\n          <Form ref={formRef} onSubmit={handleSubmit}>\n            <Heading color=\"gray.200\" marginBottom={6}>\n              Login\n            </Heading>\n            <Input name=\"email\" icon={FiMail} placeholder=\"E-mail\" />\n            <Input\n              name=\"password\"\n              icon={FiLock}\n              type=\"password\"\n              placeholder=\"Senha\"\n              containerProps={{\n                marginTop: 3,\n              }}\n            />\n            <Button\n              type=\"submit\"\n              bg=\"gray.400\"\n              color=\"gray.800\"\n              _hover={{\n                bg: 'gray.500',\n                color: 'gray.900',\n              }}\n              _focusWithin={{\n                bg: 'gray.500',\n                color: 'gray.900',\n              }}\n              width=\"100%\"\n              marginY={4}\n              paddingY={6}\n            >\n              Entrar\n            </Button>\n            <NextLink href=\"forgot-password\">\n              <Link color=\"gray.500\">Esqueci minha senha</Link>\n            </NextLink>\n          </Form>\n        </Flex>\n      </Flex>\n    </>\n  );\n};\n\nexport default Login;\n"]},"metadata":{},"sourceType":"module"}